<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Preencha o formulário de contato da Magvel para obter informações sobre nossos serviços de manutenção para veículos elétricos.">
    <title>Magvel - Solicitação de Manutenção</title>

    <!-- Favicon -->
    <link rel="icon" href="icon_e60e7db3656f80a6f5b3e55dc2ad0edd.ico">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="styles.css">

    <!-- Preconnect for Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Font Imports -->
    <link href="https://fonts.googleapis.com/css2?family=PP+Rader:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <!-- Google Tag Manager -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7HL2E484LF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7HL2E484LF');
    </script>

    <!-- Event snippet for Aumentar os contatos e orçamentos conversion page -->
    <script>
      gtag('event', 'conversion', {
          'send_to': 'AW-10859304565/jZ8wCPC1vM8ZEPWsj7oo',
          'value': 1.0,
          'currency': 'BRL'
      });
    </script>
</head>

<body>
    <header>
        <div class="logo">
            <img src="./imagens/Logos/logo_verde.png" alt="Logo">
        </div>
        <div class="cta-buttons">
            <a href="servico.html" class="cta-button">Explore Nossos Serviços</a>
        </div>
        <div class="menu-toggle" id="menuToggle">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <nav class="navbar" id="navbar">
            <a href="index.html">Home</a>
            <a href="servico.html">Serviços</a>
            <a href="sobre_nos.html">Sobre Nós</a>
            <a href="contato.html">Contato</a>
        </nav>
    </header>

    <main>
        <section style="text-align: center;" class="contact-form-section">
            <h1>Solicitação de Manutenção</h1>
            <div class="contact-form-container">
                <form id="maintenanceForm" class="contact-form" action="https://hook.us2.make.com/wika3d9y84ux3auhg4irt4pnekmufhts" method="POST">
                    <label for="name"></label>
                    <input type="text" id="name" name="name" required placeholder="Seu nome completo">
                    
                    <label for="email"></label>
                    <input type="email" id="email" name="email" required placeholder="Seu e-mail">
                    
                    <label for="phone"></label>
                    <input type="tel" id="phone" name="phone" required placeholder="Seu telefone" maxlength="15">

                    <label for="service">Serviço de Interesse:</label>
                    <select id="service" name="service" required>
                        <option value="" disabled selected>Selecione um serviço</option>
                        <option value="Manutenção Preventiva">Manutenção Preventiva</option>
                        <option value="Manutenção Corretiva">Manutenção Corretiva</option>
                        <option value="Diagnóstico de Falhas">Diagnóstico de Falhas</option>
                        <option value="Substituição de Baterias">Substituição de Baterias</option>
                        <option value="Reparo de Motores Elétricos">Reparo de Motores Elétricos</option>
                        <option value="Inspeções de Segurança">Inspeções de Segurança</option>
                        <option value="Manutenção em Freios e Suspensão">Manutenção em Freios e Suspensão</option>
                        <option value="Troca de Pneus">Troca de Pneus</option>
                    </select>

                    <textarea id="message" name="message" rows="4" required placeholder="Digite sua mensagem aqui..."></textarea>

                    <button type="submit" class="cta-button">Enviar</button>
                </form>
            </div>
        </section>
    </main>

    <script>
        // Função de máscara para o campo de telefone
        document.getElementById("phone").addEventListener("input", function(event) {
            let input = event.target.value.replace(/\D/g, ''); // Remove tudo que não é número

            // Verifica se o número tem entre 11 e 15 dígitos (DDD + 9 dígitos)
            if (input.length > 10) {
                input = input.replace(/^(\d{2})(\d{1})(\d{4})(\d{4})/, '($1) $2 $3-$4');
            } else if (input.length > 5) { // Caso tenha menos que 10 dígitos
                input = input.replace(/^(\d{2})(\d{4})(\d{0,4})/, '($1) $2-$3');
            } else if (input.length > 2) {
                input = input.replace(/^(\d{2})(\d{0,5})/, '($1) $2');
            } else {
                input = input.replace(/^(\d*)/, '($1');
            }

            event.target.value = input;
        });

        // Envio do formulário
        document.getElementById("maintenanceForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Impede o envio tradicional do formulário

            var formData = new FormData(this);

            fetch("https://hook.us2.make.com/wika3d9y84ux3auhg4irt4pnekmufhts", {
                method: "POST",
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json(); // Processa a resposta como JSON
            })
            .then(data => {
                alert(data.message); // Exibe a mensagem de sucesso
                // Limpar o formulário se necessário
                this.reset();
            })
            .catch(error => {
                alert("Erro ao enviar o formulário: " + error.message);
            });
        });
    </script>
</body>
</html>
